<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Hello Operator</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <main>

      <div class="operator-panel">
        <div class="op-enabled">
          <input type="checkbox" id="op1-enabled" value="1" :checked="enabled.1" @input="toggleOp">
          <label for="op1-enabled">OP 1</label>

          <input type="checkbox" id="op2-enabled" value="2" :checked="enabled.2" @input="toggleOp">
          <label for="op2-enabled">OP 2</label>

          <input type="checkbox" id="op3-enabled" value="3" :checked="enabled.3" @input="toggleOp">
          <label for="op3-enabled">OP 3</label>

          <input type="checkbox" id="op4-enabled" value="4" :checked="enabled.4" @input="toggleOp">
          <label for="op4-enabled">OP 4</label>

          <input type="checkbox" id="op5-enabled" value="5" :checked="enabled.5" @input="toggleOp">
          <label for="op5-enabled">OP 5</label>

          <input type="checkbox" id="op6-enabled" value="6" :checked="enabled.6" @input="toggleOp">
          <label for="op6-enabled">OP 6</label>
        </div>

        <div class="operator-selection">
          <label for="op-selected">Editing:</label>
          <select id="op-selected" :value="editing" @change="selectOp">
            <option value="1">OP 1</option>
            <option value="2">OP 2</option>
            <option value="3">OP 3</option>
            <option value="4">OP 4</option>
            <option value="5">OP 5</option>
            <option value="6">OP 6</option>
          </select>
        </div>

        <div class="operator-editing">
          <div class="params">
            <rotary-encoder
              :value="coarse"
              @input="tweak"
              min=".5" max="4"
              value="1" step=".1"
            > Coarse </rotary-encoder>

            <rotary-encoder
              :value="fine"
              @input="tweak"
              min="-.5" max=".5"
              value="0" step=".05"
            > Fine </rotary-encoder>
            
            <rotary-encoder
              :value="fixed"
              @input="tweak"
              min="0" max="4000"
              value="0" step="100"
            > Fixed </rotary-encoder>

            <rotary-encoder
              :value="depth"
              @input="tweak"
              min="0" max="100"
              value="100"
            > Depth </rotary-encoder>
          </div>
        </div>
      </div>

    </main>

    <script type="module">

import "./js/rotaryEncoder.js";
import "./js/controller.js";

// document.documentElement.addEventListener("keydown", function(e) {
//   if (e.key == "]") {
//     dx7.algorithm = (dx7.algorithm + 1) % 33
//     if (dx7.algorithm == 0) dx7.algorithm++;
//     console.log(dx7.algorithm);
//     return;
//   }
//   if (e.key == "[") {
//     dx7.algorithm -= 1;
//     if (dx7.algorithm < 1) dx7.algorithm = 32;
//     console.log(dx7.algorithm);
//     return;
//   }
//   if ("123456".includes(e.key)) {
//     return dx7.toggleOperator(e.key - 1);
//   }
//   var note = keyMap[e.key];
//   if (!note) return;
//   var f = dx7.midiToFrequency(note);
//   dx7.noteOn(f, 127);
// });

// document.documentElement.addEventListener("keyup", function(e) {
//   var note = keyMap[e.key];
//   if (!note) return;
//   var f = dx7.midiToFrequency(note);
//   dx7.noteOff(f);
// });




    </script>
  </body>
</html>